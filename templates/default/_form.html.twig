{% extends 'base.html.twig' %}

{% block title %}
    {{ page_title }}
{% endblock %}

{% block style %}
    .required::after {
        content: "*";
        color: var(--info);
    }
{% endblock %}

{% form_theme form _self %}

{% block money_widget -%}
    <div class="input-group{{ group_class|default('') }}">
        {{- block('form_widget_simple') -}}
        <div class="input-group-append">
            <span class="input-group-text">z≈Ç</span>
        </div>
    </div>
{%- endblock money_widget %}

{% block body %}
    <h1>{{ page_title }}</h1>
    {{ form_start(form) }}
    {% if false == form.vars.valid %}
        {% include 'default/_single_flash_message.html.twig' with {
            type: 'danger',
            message: 'Incorrect input',
        } %}
    {% endif %}
    {% if is_delete|default(false) %}
        {{ form_widget(form, {'attr': {'data-readonly': 'yes'}}) }}
        <script>
            function make_readonly() {
                $('[data-readonly] :input').attr('readonly','readonly').css('pointer-events','none');
            }
            function defer(method) {
                if (window.jQuery) {
                    method();
                } else {
                    setTimeout(function() { defer(method) }, 100);
                }
            }
            defer(make_readonly);
        </script>
    {% else %}
        {{ form_widget(form) }}
    {% endif %}
    <div class="form-group row float-right">
        <input type="submit"
           {% if is_delete|default(false) %}
               value="Delete" class="btn btn-danger"
           {% else %}
               value="Save" class="btn btn-primary"
           {% endif %}
        />
    </div>
    {% if back_to_list_path|default(false) %}
        <div class="form-group row float-left">
            <a href="{{ back_to_list_path }}" class="btn btn-dark">
                Go back
            </a>
        </div>
    {% endif %}
    {{ form_end(form) }}
{% endblock %}
